var win = Ti.UI.createWindow();

var navWin = Ti.UI.createWindow({
	title: "My Shopping List",
	modal: true,
	backgroundColor: "#fff"
});

var navGroup = Ti.UI.iPhone.createNavigationGroup({
	window: navWin
	
});
	

var myList = {
	"produce" : {
		"headTitle": "Produce",
		"footTitle": "Produce I need to buy.",
		"itemsNeeded": [
			{"name": "Apples", "description": "There are many kinds of apples."},
			{"name": "Bananas", "description": "Bananas are good."}
		]
	},
	"vegetables":{
		"headTitle": "Vegetables",
		"footTitle": "Vegetables I need to buy.",
		"itemsNeeded": [
			{"name": "Carrots", "description": "Maybe use them in a soup."},
			{"name": "Potatoes", "description": "Cut these into unhealthy french fries!"}
		]
	}
};


var table = Ti.UI.createTableView({
	style: Ti.UI.iPhone.TableViewStyle.GROUPED,
});

//var getProduceDetail = function(){
//	var detailWindow = Ti.UI.createWindow({
//		backgroundColor: "#fff",
//		title: this.title,
//		modal: true
//	});
//	var detailText = Ti.UI.createLabel({
//		text: this.desc,
//		font: {fontSize: 18, fontFamily: "Arial"}
		
//	});
//	detailWindow.add(detailText);
//	navGroup.open(detailWindow, {animation: true});
//};

var mySections = [];
for(n in myList){
	var tableSection = Ti.UI.createTableViewSection({
		headerTitle: myList[n].headTitle,
		footerTitle: myList[n].footTitle
	});
	for(var i = 0; i<myList[n].itemsNeeded.length; i++){
		var theRow = Ti.UI.createTableViewRow({
			title: myList[n].itemsNeeded[i].name,
			desc: myList[n].itemsNeeded[i].description,
			hasChild: true
		});
		tableSection.add(theRow);
		theRow.addEventListener("click", getDetail);
	}
	mySections.push(tableSection);	
};

table.setData(mySections);

//for(var i=0; i<produce.length; i++){
//	
	
//};


//var vegeSection = Ti.UI.createTableViewSection({
//	headerTitle: "Vegetables",
//	footerTitle: "List of vegetables we need to buy."
//});

//for(var i=0; i<vege.length; i++){
//	var theRow = Ti.UI.createTableViewRow({
//		title: vege[i].title,
//		hasChild: true
//	});
//	vegeSection.add(theRow);
//	theRow.addEventListener("click", getVegeDetail);
//};


navWin.add(table);
win.add(navGroup);
win.open();
